@inherits ChessBoardComponentBase
@using ChessClassLibrary.Pieces;
@using ChessClassLibrary;

<div class="board">
    @foreach (int height in GetYIndexes())
    {
        <div class="boardRow">
            @foreach (int width in GetXIndexes())
            {
                BackgroudColor color = BackgroudColor.Light;
                @if ((height + width) % 2 == 0)
                {
                    color = color = BackgroudColor.Dark;
                }
                int h = height;
                int w = width;
                var currentPiece = Board.GetPiece(new Position(w, h));
                <FieldComponent BackgroudColor="@color" @ref=@Fields[w,h] Position="new Position(w, h)" OnFieldClicked="OnFieldClicked">
                    @if (currentPiece != null)
                    {
                        <PieceComponent PieceColor="currentPiece.Color" PieceType="currentPiece.Type"></PieceComponent>
                    }
                </FieldComponent>
            }
        </div>
    }
</div>